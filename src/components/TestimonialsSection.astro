<!-- // src/components/TestimonialsSection.astro -->
---
import { generateReviewSchema, type ReviewItem } from '../lib/schemas/review';

// Define testimonials with review data for schema
const reviews: ReviewItem[] = [
  {
    author: 'Rajesh Kumar',
    rating: 5,
    datePublished: '2024-01-15',
    reviewBody: 'Sri Janaki Mahal provided us with a peaceful sanctuary during our pilgrimage. The spiritual atmosphere and warm hospitality made our stay truly memorable.',
    reviewTitle: 'Peaceful Sanctuary for Pilgrimage',
  },
  {
    author: 'Priya Sharma',
    rating: 5,
    datePublished: '2024-02-20',
    reviewBody: 'The rooms are clean, comfortable, and the staff is incredibly helpful. Perfect location for visiting the temples. Highly recommended!',
    reviewTitle: 'Perfect Location and Clean Rooms',
  },
  {
    author: 'Amit Mishra',
    rating: 5,
    datePublished: '2024-03-10',
    reviewBody: 'Excellent value for money. The hotel maintains high standards of cleanliness and provides authentic spiritual experience. Will visit again!',
    reviewTitle: 'Excellent Value and Cleanliness',
  },
  {
    author: 'Vandana Devi',
    rating: 5,
    datePublished: '2024-04-05',
    reviewBody: 'The peaceful environment and spiritual vibes of Sri Janaki Mahal helped me reconnect with my inner self. Truly a blessed place!',
    reviewTitle: 'Peaceful Spiritual Environment',
  },
];

// Generate review schema
const reviewSchema = generateReviewSchema(reviews);

console.log('[Testimonials] Review schema generated for', reviews.length, 'reviews');
---

<section id="testimonials" class="py-16 sm:py-24 bg-gray-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12">
      <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 mb-4">Guest Testimonials - <span class="text-amber-600">Sri Janaki Mahal Trust</span> Reviews</h2>
      <p class="text-lg text-gray-600">Hear from our blessed guests who stayed at <strong>Sri Janaki Mahal Trust hotel in Ayodhya</strong> near Ram Mandir</p>
    </div>

    <!-- Testimonials Carousel -->
    <!--
      Mobile layout note:
      - On phones, allow swipe scroll with snap so cards are centered and not clipped.
      - Keep auto-scroll animation only on md+ to avoid "misaligned" feeling on small screens.
    -->
    <div class="relative overflow-x-auto md:overflow-hidden no-scrollbar">
      <div id="testimonials-carousel" class="flex gap-6 scroll-left px-4 py-1 snap-x snap-mandatory md:snap-none">
        <!-- Testimonial 1 -->
        <div class="flex-shrink-0 w-[85vw] max-w-sm sm:w-96 sm:max-w-none bg-white rounded-lg shadow-lg p-6 snap-start">
          <div class="flex items-center gap-1 mb-4">
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
          </div>
          <p class="text-gray-700 mb-4 leading-relaxed">
            "Sri Janaki Mahal provided us with a peaceful sanctuary during our pilgrimage. The spiritual atmosphere and warm hospitality made our stay truly memorable."
          </p>
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-amber-600 rounded-full flex items-center justify-center text-white font-bold">
              RK
            </div>
            <div>
              <p class="font-semibold text-gray-900">Rajesh Kumar</p>
              <p class="text-sm text-gray-600">Pilgrimage Visitor</p>
            </div>
          </div>
        </div>

        <!-- Testimonial 2 -->
        <div class="flex-shrink-0 w-[85vw] max-w-sm sm:w-96 sm:max-w-none bg-white rounded-lg shadow-lg p-6 snap-start">
          <div class="flex items-center gap-1 mb-4">
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
          </div>
          <p class="text-gray-700 mb-4 leading-relaxed">
            "The rooms are clean, comfortable, and the staff is incredibly helpful. Perfect location for visiting the temples. Highly recommended!"
          </p>
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-amber-600 rounded-full flex items-center justify-center text-white font-bold">
              PS
            </div>
            <div>
              <p class="font-semibold text-gray-900">Priya Sharma</p>
              <p class="text-sm text-gray-600">Spiritual Seeker</p>
            </div>
          </div>
        </div>

        <!-- Testimonial 3 -->
        <div class="flex-shrink-0 w-[85vw] max-w-sm sm:w-96 sm:max-w-none bg-white rounded-lg shadow-lg p-6 snap-start">
          <div class="flex items-center gap-1 mb-4">
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
          </div>
          <p class="text-gray-700 mb-4 leading-relaxed">
            "Excellent value for money. The hotel maintains high standards of cleanliness and provides authentic spiritual experience. Will visit again!"
          </p>
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-amber-600 rounded-full flex items-center justify-center text-white font-bold">
              AM
            </div>
            <div>
              <p class="font-semibold text-gray-900">Amit Mishra</p>
              <p class="text-sm text-gray-600">Returning Guest</p>
            </div>
          </div>
        </div>

        <!-- Testimonial 4 -->
        <div class="flex-shrink-0 w-[85vw] max-w-sm sm:w-96 sm:max-w-none bg-white rounded-lg shadow-lg p-6 snap-start">
          <div class="flex items-center gap-1 mb-4">
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
          </div>
          <p class="text-gray-700 mb-4 leading-relaxed">
            "The peaceful environment and spiritual vibes of Sri Janaki Mahal helped me reconnect with my inner self. Truly a blessed place!"
          </p>
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-amber-600 rounded-full flex items-center justify-center text-white font-bold">
              VD
            </div>
            <div>
              <p class="font-semibold text-gray-900">Vandana Devi</p>
              <p class="text-sm text-gray-600">Meditation Practitioner</p>
            </div>
          </div>
        </div>

        <!-- Duplicate for seamless loop -->
        <div class="flex-shrink-0 w-[85vw] max-w-sm sm:w-96 sm:max-w-none bg-white rounded-lg shadow-lg p-6 snap-start">
          <div class="flex items-center gap-1 mb-4">
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
            <span class="text-yellow-400">★</span>
          </div>
          <p class="text-gray-700 mb-4 leading-relaxed">
            "Sri Janaki Mahal provided us with a peaceful sanctuary during our pilgrimage. The spiritual atmosphere and warm hospitality made our stay truly memorable."
          </p>
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-amber-600 rounded-full flex items-center justify-center text-white font-bold">
              RK
            </div>
            <div>
              <p class="font-semibold text-gray-900">Rajesh Kumar</p>
              <p class="text-sm text-gray-600">Pilgrimage Visitor</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Review Schema for SEO -->
{reviewSchema && (
  <script type="application/ld+json" set:html={JSON.stringify(reviewSchema)} />
)}

<style>
  /* Avoid mobile "clipped/misaligned" auto-scroll; keep it on md+ only */
  @media (min-width: 768px) {
    #testimonials-carousel {
      animation: scroll-left 40s linear infinite;
    }
  }
</style>
