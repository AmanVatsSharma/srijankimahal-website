<!-- // src/pages/hi/rooms/[slug].astro -->
---
import Layout from '../../../layouts/Layout.astro';
import Header from '../../../components/Header.astro';
import Footer from '../../../components/Footer.astro';
import FloatingWhatsApp from '../../../components/FloatingWhatsApp.astro';
import { generateBreadcrumbSchema } from '../../../lib/schemas/breadcrumb';
import { roomsConfig } from '../../rooms/[slug].astro';

export async function getStaticPaths() {
  return Object.keys(roomsConfig).map((slug) => ({
    params: { slug },
  }));
}

const { slug } = Astro.params as { slug: string };
const room = roomsConfig[slug];

if (!room) {
  throw new Error(`Room slug "${slug}" not found in configuration`);
}

const breadcrumbs = generateBreadcrumbSchema([
  { name: 'Home', url: '/hi' },
  { name: 'Rooms', url: '/hi/rooms' },
  { name: room.heading, url: `/hi/rooms/${slug}` },
]);
---

<Layout
  title={`कमरा - ${room.heading} | श्री जानकी महल ट्रस्ट`}
  description={room.metaDescription}
  keywords={room.keywords}
  canonical={`/hi/rooms/${slug}`}
  ogImage={room.images?.[0]?.src ?? '/og.jpg'}
  lang="hi"
>
  <Header />

  <main class="bg-[#faf8f3] py-12">
    <div class="mx-auto flex max-w-6xl flex-col gap-12 px-4 sm:px-6 lg:px-8">
      <section class="rounded-3xl bg-white p-8 shadow-lg">
        <div class="flex flex-col gap-8 md:flex-row md:items-center md:justify-between">
          <div class="space-y-4">
            <p class="text-sm font-semibold uppercase tracking-[0.3em] text-[#6b4c2d]">Room Details</p>
            <h1 class="text-4xl font-bold text-[#2d2215] md:text-5xl">{room.heading}</h1>
            <p class="text-lg leading-relaxed text-[#3d2f1c]">{room.metaDescription}</p>
            <p class="text-base font-semibold text-[#b45309]">{room.priceRange}</p>
          </div>
          <div class="rounded-3xl bg-[#fef4e4] p-6 text-center shadow-md">
            <p class="text-sm uppercase tracking-[0.2em] text-[#b45309]">Official Booking</p>
            <p class="mt-3 text-4xl font-extrabold text-[#2d2215]">{room.icon}</p>
            <div class="mt-4 flex flex-col gap-3">
              <a class="rounded-xl bg-[#2d2215] px-6 py-3 text-base font-semibold uppercase tracking-wide text-white transition hover:bg-[#b45309]" href="/hi/contact-number">
                कॉल/WhatsApp करें
              </a>
              <a class="rounded-xl border border-[#2d2215] px-6 py-3 text-base font-semibold uppercase tracking-wide text-[#2d2215] transition hover:bg-[#f4ecdf]" href="/hi/booking">
                बुकिंग पेज
              </a>
            </div>
          </div>
        </div>
      </section>

      <section class="rounded-3xl bg-white p-8 shadow-md">
        <h2 class="text-3xl font-semibold text-[#2d2215]">Room Gallery</h2>
        <div class="mt-6 grid gap-6 md:grid-cols-2">
          {room.images.map((image) => (
            <figure class="overflow-hidden rounded-2xl border border-[#f2dfc7] shadow-sm">
              <img
                src={image.src}
                alt={image.alt}
                width={image.width}
                height={image.height}
                title={image.title}
                loading="lazy"
                decoding="async"
                class="h-full w-full object-cover transition duration-500 hover:scale-105"
              />
              <figcaption class="bg-[#fef6ea] p-4 text-sm text-[#3d2f1c]">{image.caption}</figcaption>
            </figure>
          ))}
        </div>
      </section>

      <section class="rounded-3xl bg-[#fef4e4] p-8 shadow-inner">
        <h2 class="text-3xl font-semibold text-[#2d2215]">मुख्य सुविधाएँ</h2>
        <ul class="mt-6 grid gap-4 text-base text-[#3d2f1c] md:grid-cols-2">
          {room.highlights.map((highlight) => (
            <li class="rounded-2xl bg-white p-4 shadow-sm">✓ {highlight}</li>
          ))}
        </ul>
      </section>
    </div>
  </main>

  {breadcrumbs && <script type="application/ld+json" set:html={JSON.stringify(breadcrumbs)} />}
  <Footer />
  <FloatingWhatsApp />
</Layout>

